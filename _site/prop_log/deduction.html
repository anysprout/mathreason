<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>How to Become a Mathematician - Deduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">How to Become a Mathematician</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-prop.-logic" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Prop. Logic</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-prop.-logic">    
        <li>
    <a class="dropdown-item" href="../prop_log/ancient_greek.html" rel="" target="">
 <span class="dropdown-text">Ancient Greece</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../prop_log/core_examples.html" rel="" target="">
 <span class="dropdown-text">Two Examples</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../prop_log/abstract_propositions.html" rel="" target="">
 <span class="dropdown-text">Abstract Propositions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../prop_log/parse_tree.html" rel="" target="">
 <span class="dropdown-text">Parse Trees</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../prop_log/eval.html" rel="" target="">
 <span class="dropdown-text">Propositional Evaluation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../prop_log/op_props.html" rel="" target="">
 <span class="dropdown-text">Semantic Properties</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../prop_log/deduction.html" rel="" target="">
 <span class="dropdown-text">Deduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../prop_log/axiom_systems.html" rel="" target="">
 <span class="dropdown-text">Axiom Systems</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-fol" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">FOL</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-fol">    
        <li>
    <a class="dropdown-item" href="../fol/pred.html" rel="" target="">
 <span class="dropdown-text">Predicate Logic</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../fol/quant.html" rel="" target="">
 <span class="dropdown-text">Quantifiers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../fol/fol.html" rel="" target="">
 <span class="dropdown-text">First-order Logic Semantics</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-arithmetic" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Arithmetic</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-arithmetic">    
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-geometry" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Geometry</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-geometry">    
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reals" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Reals</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-reals">    
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-combinatorics" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Combinatorics</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-combinatorics">    
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-set-theory" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Set Theory</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-set-theory">    
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../prop_log/deduction.html">Deduction</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prop_log/ancient_greek.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ancient Greece</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prop_log/core_examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Two Examples</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prop_log/abstract_propositions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Abstract Propositions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prop_log/parse_tree.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Parse Trees</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prop_log/eval.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Propositional Evaluation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prop_log/op_props.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Semantic Properties</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prop_log/deduction.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Deduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prop_log/axiom_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Axiom Systems</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="3">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#negation-and-disjunction" id="toc-negation-and-disjunction" class="nav-link active" data-scroll-target="#negation-and-disjunction">Negation and Disjunction</a></li>
  <li><a href="#conjunction-conditional-biconditional-and-reiteration" id="toc-conjunction-conditional-biconditional-and-reiteration" class="nav-link" data-scroll-target="#conjunction-conditional-biconditional-and-reiteration">Conjunction, Conditional, Biconditional, and Reiteration</a></li>
  <li><a href="#deduction" id="toc-deduction" class="nav-link" data-scroll-target="#deduction">Deduction</a>
  <ul class="collapse">
  <li><a href="#conditional-introduction" id="toc-conditional-introduction" class="nav-link" data-scroll-target="#conditional-introduction">Conditional Introduction</a>
  <ul class="collapse">
  <li><a href="#restrictions-on-conditional-proof" id="toc-restrictions-on-conditional-proof" class="nav-link" data-scroll-target="#restrictions-on-conditional-proof">Restrictions on Conditional Proof</a></li>
  </ul></li>
  <li><a href="#proof-by-contradiction" id="toc-proof-by-contradiction" class="nav-link" data-scroll-target="#proof-by-contradiction">Proof by Contradiction</a></li>
  </ul></li>
  <li><a href="#deductions-in-python" id="toc-deductions-in-python" class="nav-link" data-scroll-target="#deductions-in-python">Deductions in Python</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Deduction</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Entailment is about which propositions “make” other propositions “necessary”. That is to say, if <span class="math inline">\(\Delta\vDash \alpha\)</span> then the truth of <span class="math inline">\(\Delta\)</span> “makes” <span class="math inline">\(\alpha\)</span> true, so-to-speak. Deduction, on the other hand, is about demonstrating something more like “reasons why” the entailment holds.</p>
<p>Take for example the fact that <span class="math inline">\(\frac{xy}{z}+wx = 1\)</span> for real numbers <span class="math inline">\(w,x,y,z\)</span> with <span class="math inline">\(z\ne 0\)</span>, entails <span class="math inline">\(w=\frac 1 x - \frac y z\)</span>. It’s all good and well that this entailment holds – but we want a proof! A proof is like receipts, something you can check to validate a claim.</p>
<section id="negation-and-disjunction" class="level1">
<h1>Negation and Disjunction</h1>
<p>Here we will introduce inference rules for negation and disjunction. It will be helpful to have this example in mind:</p>
<blockquote class="blockquote">
<p>Either the enemy will approach by land or by sea. They will not approach by land. Therefore they will approach by sea.</p>
</blockquote>
<p>The clarify of this inference motivates accepting the following as a rule of inference:</p>
<blockquote class="blockquote">
<p>For any propositions <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span>, if <span class="math inline">\(\alpha\lor\beta\)</span> and also <span class="math inline">\(\neg\beta\)</span> are true, then one may infer <span class="math inline">\(\alpha\)</span>.</p>
</blockquote>
<p>We call the above <em>Disjunction Elimination</em>. Every inference rule has some set of <strong>premises</strong>. These are propositions which need to be true in order for the inference rule to apply. In <em>Disjunction Elimination</em> the premises are the elements of the set <span class="math inline">\(\{\alpha\lor\beta,\neg\beta\}\)</span>. Every inference rule also has a <strong>conclusion</strong>, which is the sentence that one is licensed to accept by the inference rule. In the case of <em>Disjunction Elimination</em> the conclusion is <span class="math inline">\(\alpha\)</span>.</p>
<p>There is also a rule called <em>Disjunction Introduction</em>.</p>
<blockquote class="blockquote">
<p>If <span class="math inline">\(\alpha\)</span> is true then <span class="math inline">\(\alpha\lor\beta\)</span> is true, for any propositions <span class="math inline">\(\alpha,\beta\)</span>.</p>
</blockquote>
<p>The premise of <em>Disjunction Introduction</em> is <span class="math inline">\(\{\alpha\}\)</span> and the conclusion is <span class="math inline">\(\alpha\lor\beta\)</span>.</p>
<p>An inference rule is called <em>valid</em> if the premise entails the conclusion. We will only ever use valid inference rules (which the reader is encouraged to check).<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>To help express inference rules, we use the following notation.</p>
<p><span class="math display">\[\begin{aligned}
\text{\it Disjunction Elimination:}&amp;&amp;  \{\alpha\lor\beta,\neg\beta\} &amp;\therefore \alpha\\
\text{\it Disjunction Introduction:}&amp;&amp; \{\alpha\} &amp;\therefore \alpha\lor\beta
\end{aligned}
\]</span></p>
<p>The symbol <span class="math inline">\(\therefore\)</span> is read as “therefore”, with the premises to its left and the conclusion to its right.</p>
<p>The disjunction rules are also fairly unwieldy if we have to use them in the rigid order that they appear above. Therefore we will augment the rules to make them easier to use.</p>
<p><span class="math display">\[\begin{aligned}
\text{\it Disjunction Elimination:}&amp;&amp;  \{\alpha\lor\beta,\neg\beta\} &amp;\therefore \alpha\\
&amp;&amp;\{\alpha\lor\beta,\neg\alpha\}&amp;\therefore\beta\\
\text{\it Disjunction Introduction:}&amp;&amp; \{\alpha\} &amp;\therefore \alpha\lor\beta\\
&amp;&amp;\{\alpha\}&amp;\therefore \beta\lor\alpha
\end{aligned}
\]</span></p>
<p>Negation has its own elimination and introduction rules.</p>
<p><span class="math display">\[\begin{aligned}
\text{\it Negation Elimination:}&amp;&amp; \neg(\neg\alpha)&amp;\therefore\alpha\\
\text{\it Negation Introduction:}&amp;&amp; \alpha&amp;\therefore\neg(\neg \alpha)
\end{aligned}\]</span></p>
<p>All of these rules will be relatively useless if we don’t also accept the reasonable principle that if <span class="math inline">\(\Delta\)</span> is any set of propositions, and <span class="math inline">\(\Delta\subseteq\Gamma\)</span>, then if <span class="math inline">\(\Delta\therefore \alpha\)</span> then also <span class="math inline">\(\Gamma\therefore \alpha\)</span>. This is known as the principle of monotonicity. It basically says</p>
<blockquote class="blockquote">
<p>If <span class="math inline">\(\Delta\)</span> proves <span class="math inline">\(\alpha\)</span> and if <span class="math inline">\(\Gamma\)</span> is even more powerful than <span class="math inline">\(\Delta\)</span>, then also <span class="math inline">\(\Gamma\)</span> proves <span class="math inline">\(\alpha\)</span>.</p>
</blockquote>
<div class="callout callout-style-simple callout-important no-icon callout-titled" title="Exercise Disjunction and Negation">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise Disjunction and Negation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Show that with the premises <span class="math inline">\(\{\alpha,\neg\alpha\}\)</span> one can infer <span class="math inline">\(\alpha\lor\beta\)</span> for any proposition <span class="math inline">\(\beta\)</span>.</p>
<p>Then show that <span class="math inline">\(\{\alpha,\neg\alpha,\alpha\lor\beta\}\therefore \beta\)</span>.</p>
<p>Note that it is <em>not</em> true that <span class="math inline">\(\{\alpha,\neg\alpha\}\therefore\beta\)</span>.</p>
</div>
</div>
</section>
<section id="conjunction-conditional-biconditional-and-reiteration" class="level1">
<h1>Conjunction, Conditional, Biconditional, and Reiteration</h1>
<p>Here are some of the remaining inference rules. You are invited to check any or all of them to be sure that they are valid.</p>
<p><span class="math display">\[\begin{aligned}
\text{\it Conjunction Elimination:}&amp;&amp; \{\alpha\land\beta\}&amp;\therefore \alpha\\
&amp;&amp; \{\alpha\land\beta\}&amp;\therefore \beta\\
\text{\it Conjunction Introduction:}&amp;&amp; \{\alpha\}&amp;\therefore \alpha\land\beta\\
&amp;&amp; \{\alpha\}&amp;\therefore \beta\land\alpha\\
\text{\it Conditional Elimination:}&amp;&amp; \{\alpha\to\beta,\alpha\}&amp;\therefore \beta\\
\text{\it Biconditional Elimination:}&amp;&amp; \{\alpha\leftrightarrow\beta,\alpha\}&amp;\therefore \beta\\
&amp;&amp; \{\alpha\leftrightarrow\beta,\beta\}&amp;\therefore \alpha\\
\text{\it Reiteration:} &amp;&amp; \alpha &amp;\therefore \alpha
\end{aligned}\]</span></p>
<div class="callout callout-style-simple callout-important no-icon callout-titled" title="Conjunction Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Conjunction Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prove that <span class="math inline">\(\{P,Q,R\}\therefore Q\land R\)</span> and <span class="math inline">\(\{P,Q,R, Q\land R\}\therefore P\land(Q\land R)\)</span>.</p>
</div>
</div>
</section>
<section id="deduction" class="level1">
<h1>Deduction</h1>
<p>We have seen several inference rules. If we then chain together inference rules, we get what is called a <strong>deduction</strong>.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> We have already seen a few examples, like how <span class="math inline">\(\{\alpha,\neg\alpha\}\therefore \alpha\lor\beta\)</span> and then <span class="math inline">\(\{\alpha,\neg\alpha,\alpha\lor\beta\}\therefore\beta\)</span>. We represent chaining these together by putting them in a so-called two-column proof.</p>
<p><span class="math display">\[
\definecolor{subtle}{rgb}{.99,.99,.9}
\begin{array}{|l|c|c|} \hline
\text{No.}&amp;\text{ Prop } &amp; \text{Reason}\\\hline
1. &amp; \alpha &amp; \text{Premise} \\ \rowcolor{subtle}
2. &amp; \neg\alpha &amp; \text{Premise} \\
3. &amp; \alpha\lor\beta &amp; \lor\text{I}, 1\\ \rowcolor{subtle}
4. &amp; \beta &amp; \lor\text{E},2,3\\\hline
\end{array}
\]</span></p>
<p>What the table represents is that, on lines 1 and 2, we start from some premises. As we proceed to next lines, we can always reference earlier lines in the proof, and apply inference rules to derive new lines. Therefore line 3 is allowed to derive <span class="math inline">\(\alpha\lor\beta\)</span> from line 1, using the <em>Disjunction Introduction</em> inference rule. Because propositions merely “accumulate” as we go, then by the time we reach line 4, it is allows to use all of the lines before it, to derive a new line. In this particular example, it uses lines 2 and 3 with the inference rule for <em>Disjunction Elimination</em>.</p>
<p>In a two-column proof, every line must contain both a proposition and a “justification”. That justification can be either (1) premise, for propositions in the premise of the deduction, or (2) any inference rule, applied to lines earlier in the proof.</p>
<p>Since there is a deduction from premise <span class="math inline">\(\{\alpha,\neg\alpha\}\)</span> to proposition <span class="math inline">\(\beta\)</span>, we express the existence of this deduction by writing <span class="math inline">\(\{\alpha,\neg\alpha\}\vdash\beta\)</span>. In this case we say that <span class="math inline">\(\{\alpha,\neg\alpha\}\)</span> <strong>proves</strong> <span class="math inline">\(\beta\)</span>.</p>
<div class="callout callout-style-simple callout-important no-icon callout-titled" title="Chaining Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Chaining Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Show that <span class="math inline">\(\{P,Q,R\}\vdash P\land (Q\land R)\)</span> and also <span class="math inline">\(\{P,Q,R\}\vdash R\land(P\land Q)\)</span>.</p>
</div>
</div>
<div class="callout callout-style-simple callout-important no-icon callout-titled" title="Arrow Conjunction Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Arrow Conjunction Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Show that <span class="math inline">\(\{(P\to Q)\land (P\to R), P\}\vdash Q\land R\)</span>.</p>
</div>
</div>
<section id="conditional-introduction" class="level2">
<h2 class="anchored" data-anchor-id="conditional-introduction">Conditional Introduction</h2>
<p>You will no doubt have noticed that most operations have an elimination and an introduction rule, but with one conspicuous exception. There is no conditional introduction rule! The reason for this omission is that the conditional introduction rule requires a new technique that we will introduce here.</p>
<p>It is perhaps easiest to simply give a demonstration. Suppose that we would like to prove <span class="math inline">\(\{P\lor Q\} \vdash \neg P\to Q\)</span>. Intuitively, the argument would go like this: “<em>Suppose</em> that <span class="math inline">\(\neg P\)</span> is true. Well then, we now have <span class="math inline">\(\{P\lor Q,\neg P\}\)</span> as our premise. In that case we can use <em>Disjunction Elimination</em> to infer <span class="math inline">\(Q\)</span>. Since the supposition of <span class="math inline">\(\neg P\)</span> leads to <span class="math inline">\(Q\)</span>, we can therefore infer that ‘If <span class="math inline">\(\neg P\)</span> then <span class="math inline">\(Q\)</span>.’”</p>
<p>This is effectively a “subproof”. That is to say, we assume <span class="math inline">\(\neg P\)</span> and then conduct a proof of something (in this example, that “something” is <span class="math inline">\(Q\)</span>). At the end of the subproof, we then “export” a conditional proposition. The conditional has, as its antecedent, whatever we assumed for the subproof. It has as its consequent, whatever the subproof ended with. In the two-column system we would represent the subproof like this:</p>
<p><span class="math display">\[
\definecolor{subtl}{rgb}{.95,.95,.85}
\begin{array}{|c|c|c|} \hline
\text{No.} &amp; \text{Prop} &amp; \text{Reason} \\\hline
1. &amp; P\lor Q &amp; \text{Premise} \\ \rowcolor{subtle}
2. &amp; \neg P\to Q &amp;
\begin{array}{|c|c|c|} \hline
\text{No.} &amp; \text{Prop} &amp; \text{Reason} \\\hline
2.1. &amp; \neg P &amp; \text{$\to$ Assumption} \\\hline \rowcolor{subtl}
2.2. &amp; Q &amp; \lor\text{E}, 1., 2.1. \\\hline
\end{array} \\\hline
\end{array}
\]</span></p>
<p>Notice that the justification for line 2 is the subproof. Also notice the system that we adopt for numbering lines in a subproof. In the subproof on line number 2, the reason is <span class="math inline">\(\lor\)</span>E, 1, 2.1. What this means is that, of course, line 1 contains <span class="math inline">\(P\lor Q\)</span>. But where is 2.1? It is on line 2 of the main proof, but inside of line 2 we refer to line 1 of the subproof there. This is where we find the proposition <span class="math inline">\(\neg P\)</span>.</p>
<p>And indeed, from <span class="math inline">\(P\lor Q\)</span> and <span class="math inline">\(\neg P\)</span> we are able to infer, with <em>Disjunction Elimination</em>, the proposition <span class="math inline">\(Q\)</span>. This is what I have entered at line 2.2.</p>
<hr>
<p>Here’s another example where I prove that <span class="math inline">\(\{P\to Q\}\vdash \{P\to (R\lor Q)\}\)</span>.</p>
<p><span class="math display">\[
\begin{array}{|c|c|c|}\hline
    \text{No.} &amp; \text{Prop} &amp; \text{Reason} \\\hline
    1. &amp; P\to Q &amp; \text{Premise} \\\hline \rowcolor{subtle}
    2. &amp; P\to (R\lor Q) &amp;
        \begin{array}{|c|c|c|}\hline
        \text{No.} &amp; \text{Prop} &amp; \text{Reason} \\\hline
        2.1. &amp; P &amp; \text{$\to$Assumption} \\ \rowcolor{subtl}
        2.2. &amp; Q &amp; \to\text{E}, 1., 2.1.\\
        2.3. &amp; R\lor Q &amp; \lor\text{I}, 2.2. \\ \hline
        \end{array}\\\hline
\end{array}
\]</span></p>
<p>Again notice how this works: We want to prove <span class="math inline">\(P\to (R\lor Q)\)</span>, so we make a subproof with assumption <span class="math inline">\(P\)</span> and ending at <span class="math inline">\(R\lor Q\)</span>.</p>
<hr>
<p>Here’s an example of a proof <em>with no premises</em>. This is in fact possible because the <em>Conditional Introduction</em> does not require there to be any premises – it allows you to make any assumption that you want, at any time!</p>
<p>We will prove <span class="math inline">\(\emptyset\vdash P\to P\)</span>.</p>
<p><span class="math display">\[
\begin{array}{|c|c|c|}\hline
\text{No.} &amp; \text{Prop} &amp; \text{Reason} \\ \hline
1. &amp; P\to P &amp;
  \begin{array}{|c|c|c|}\hline
  \text{No.} &amp; \text{Prop} &amp; \text{Reason} \\\hline
  1.1. &amp; P &amp; \to\text{Assumption} \\ \rowcolor{subtle}
  1.2. &amp; P &amp; \text{Reit}, 1.1. \\ \hline
  \end{array}\\\hline
\end{array}
\]</span></p>
<p>This might seem like a strange argument. What is this “Reit”? It is the <em>Reiteration</em> rule that was introduced in the long list of various inference rules. It says, effectively, that if a proposition is on any line in a proof, then on a later line we can always choose to “reiterate” it on a new line.</p>
<p>This is pretty much only useful in conditional proofs, where we really <em>need</em> the last line of the proof to be our “target” consequent of the conditional. In this case we needed it to be <span class="math inline">\(P\)</span>, because that is the consequent of the proposition that we’re proving, <span class="math inline">\(P\to P\)</span>.</p>
<hr>
<p>Let’s next see a proof from no premises that <span class="math inline">\(\emptyset\vdash (P\land (P\to Q))\to Q\)</span>.</p>
<p><span class="math display">\[
\begin{array}{|c|c|c|}\hline
\text{No.}&amp;\text{Prop}&amp;\text{Reason}\\\hline
1. &amp; (P\land(P\to Q))\to Q &amp;
  \begin{array}{|c|c|c|}\hline
  1.1. &amp; P\land(P\to Q)&amp; \to\text{Assumption} \\ \rowcolor{subtle}
  1.2. &amp; P &amp; \land\text{E},1.1.\\
  1.3. &amp; P\to Q &amp; \land\text{E},1.1\\\rowcolor{subtle}
  1.4. &amp; Q &amp; \to\text{E},1.2.,1.3. \\
  \hline
  \end{array}\\\hline
\end{array}
\]</span></p>
<section id="restrictions-on-conditional-proof" class="level3">
<h3 class="anchored" data-anchor-id="restrictions-on-conditional-proof">Restrictions on Conditional Proof</h3>
<p>I have not yet really specified the rules of conditional proof, because they can be somewhat difficult to understand. For now I have mostly tried to communicate the method by examples. However, take the following example which demonstrates that this technique is invalid if used in the wrong ways.</p>
<p><span class="math display">\[
\begin{array}{|c|c|c|} \hline
\text{No.} &amp; \text{Prop} &amp; \text{Reason} \\\hline
1. &amp; P\to (P\lor Q) &amp;
  \begin{array}{|c|c|c|} \hline
  1.1. &amp; P &amp; \text{Assumption} \\ \rowcolor{subtle}
  1.2. &amp; P\lor Q &amp; \lor\text{I},1.1\\\hline
  \end{array} \\ \rowcolor{subtle}
2. &amp; P &amp; \text{Reit}, 1.1 \\\hline
\end{array}
\]</span></p>
<p>Notice that the above argument only uses our inference rules, so it seems like an acceptable proof! Does that mean that our <em>Conditional Introduction</em> rule is invalid?</p>
<p>If it is used “unrestrictedly” then yes. Therefore we must place restrictions on it, so that the rule will be valid. The problem with the above proof, is the very last step. On line 2, it justifies writing a proposition ( <span class="math inline">\(P\)</span>) based on a line (1.1.) which was only introduced for conditional proof. But lines that occur in a subproof are only meant to be used for the subproof and not outside of it.</p>
<p>Since this is the source of the invalidity, this is precisely the restriction that we place on all proofs: On any line of a proof, one is only allowed to reference lines which do not come from a “closed” subproof. So for instance, in the above proof it is fine for like 1.2 to reference 1.1, because at line 1.2 the subproof is not yet closed. But at line 2. it is not acceptable to reference line 1.1 because that occurs in a subproof which, by line 2 has already been closed.</p>
<div class="callout callout-style-simple callout-important no-icon callout-titled" title="Valid References">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Valid References
</div>
</div>
<div class="callout-body-container callout-body">
<p>Consider the following proof.</p>
<p><span class="math display">\[
\begin{array}{|c|c|c|}\hline
  \text{No.}&amp;\text{Prop}&amp;\text{Reason}\\\hline
  1. &amp; (P\land Q) \to P &amp;
    \begin{array}{|c|c|c|}\hline
    \text{No.}&amp;\text{Prop}&amp;\text{Reason}\\\hline
    1.1. &amp; P\land Q &amp; \to\text{Assumption}\\\rowcolor{subtle}
    1.2. &amp; P &amp; \land\text{E} \\\hline
    \end{array}\\\hline\rowcolor{subtle}
  2. &amp; P &amp; \to\text{E}, 1., 1.1. \\\hline
\end{array}
\]</span></p>
<p>Is this a valid argument? If not, at which line is an invalid inference made?</p>
</div>
</div>
</section>
</section>
<section id="proof-by-contradiction" class="level2">
<h2 class="anchored" data-anchor-id="proof-by-contradiction">Proof by Contradiction</h2>
<p>There is a second proof method which uses subproofs. This is proof by contradiction. Consider the following argument which illustrates the technique.</p>
<blockquote class="blockquote">
<p>We will prove that there is no largest number. For contradiction, suppose that there is a largest number and call it <span class="math inline">\(x\)</span>. Then <span class="math inline">\(x+1\)</span> is a number and larger. Therefore <span class="math inline">\(x\)</span> is both largest (by assumption) and not largest (because there is a larger number). This is a contradiction. Because the assumption that there is a largest number produced a contradiction, then the assumption must be false. So there is no largest number.</p>
</blockquote>
<p>The idea is that we</p>
<ol type="1">
<li>Assume the <em>negation</em> of what you hope to prove. (e.g.&nbsp;“there <em>is</em> a largest number”)</li>
<li>From the assumption, derive a contradiction. (“<span class="math inline">\(x\)</span> is largest and not largest”)</li>
<li>Therefore end the subproof, and infer what you wanted to prove. (“there is <em>no</em> largest number”)</li>
</ol>
<p>Below I’ll illustrate this technique in a two-column proof that <span class="math inline">\(\{P\lor Q\}\vdash \neg(\neg P\land\neg Q)\)</span>.</p>
<p><span class="math display">\[
\begin{array}{|c|c|c|}\hline
\text{No.} &amp; \text{Prop} &amp; \text{Reason} \\\hline
1. &amp; P\lor Q &amp; \text{Premise} \\ \rowcolor{subtle}
2. &amp; \neg(\neg P\land \neg Q) &amp;
  \begin{array}{|c|c|c|}\hline
  \text{No.} &amp; \text{Prop} &amp; \text{Reason} \\\hline
  2.1. &amp; \neg(\neg(\neg P\land \neg Q)) &amp; \unicode{x21af} \text{Assumption}\\\rowcolor{subtl}
  2.2. &amp; \neg P\land \neg Q &amp; \neg\text{E},2.1. \\
  2.3. &amp; \neg P &amp; \land\text{E},2.2. \\ \rowcolor{subtl}
  2.4. &amp; \neg Q &amp; \land \text{E},2.2. \\
  2.5. &amp; Q &amp; \lor\text{E},1.,2.4. \\ \rowcolor{subtl}
  2.6. &amp; Q\land\neg Q&amp; \land\text{I}, 2.4.,2.5.\\\hline
\end{array} \\ \hline
\end{array}
\]</span></p>
<p>Notice how the subproof in line 2 ends on the contradiction <span class="math inline">\(Q\land\neg Q\)</span>. Every proof by contradiction must end on a line containing <span class="math inline">\(\alpha\land\neg\alpha\)</span> or <span class="math inline">\(\neg\alpha\land\alpha\)</span>, for some proposition <span class="math inline">\(\alpha\)</span>.</p>
<hr>
<p>Here is a proof that <span class="math inline">\(\{\neg(P\land Q)\}\vdash \neg P\lor\neg Q\)</span>. This will be somewhat interesting in that it has a subproof within a subproof!</p>
<p><span class="math display">\[
\begin{array}{|c|c|c|}\hline
\text{No.}&amp;\text{Prop}&amp;\text{Reason} \\\hline
1. &amp; \neg(P\land Q) &amp; \text{Premise}\\ \rowcolor{subtle}
2. &amp; \neg P\lor\neg Q &amp;
  \begin{array}{|c|c|c|}\hline
  \text{No.}&amp;\text{Prop}&amp;\text{Reason} \\\hline
  2.1 &amp; \neg(\neg P\lor \neg Q) &amp; \unicode{x21af}\text{Assumption}\\ \rowcolor{subtl}
  2.2. &amp; P &amp;
    \begin{array}{|c|c|c|}\hline
    \text{No.}&amp;\text{Prop}&amp;\text{Reason} \\\hline
    2.2.1. &amp; \neg P &amp; \unicode{x21af}\text{Assumption}\\
    2.2.2. &amp; \neg P\lor\neg Q &amp; \lor\text{I},2.2.1\\
    2.2.3. &amp; \begin{array}{c} \\\neg(\neg P\lor\neg Q)\land \\ \neg P\lor\neg Q\end{array} &amp; \land\text I, 2.1, 2.2.3. \\\hline
    \end{array}\\
  2.3. &amp; Q &amp; \text{Similar to above.} \\ \rowcolor{subtl}
  2.4. &amp; P\land Q &amp; \land\text{I}, 2.2, 2.3 \\
  2.5. &amp; (P\land Q)\land \neg (P\land Q) &amp; \land\text I, 1., 2.4 \\\hline
  \end{array}\\\hline
\end{array}
\]</span></p>
<div class="callout callout-style-simple callout-important no-icon callout-titled" title="Proof Exercises">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Proof Exercises
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prove the following.</p>
<ol type="1">
<li><span class="math inline">\(\{\neg(P\to Q) \}\vdash P\)</span></li>
<li><span class="math inline">\(\emptyset \vdash P\lor\neg P\)</span></li>
<li><span class="math inline">\(\{P\land\neg P\}\vdash \alpha\)</span> for any proposition <span class="math inline">\(\alpha\)</span></li>
<li><span class="math inline">\(\{P\lor Q, P\to R, Q\to S\}\vdash R\lor S\)</span></li>
</ol>
</div>
</div>
</section>
</section>
<section id="deductions-in-python" class="level1">
<h1>Deductions in Python</h1>
<p>It is possible to simply give a computer some set of propositions, and a conclusion, and have a program find a deduction from the premise to the conclusion. However, that is quite a challenging task and so we won’t try to implement the idea here.</p>
<p>What is still challenging, but not THAT challenging, though, is to write a program which checks an argument for validity. For instance we might represent an argument as a list of proposition-inference pairs.</p>
<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>argument <span class="op">=</span> [(<span class="st">"Premise"</span>,<span class="st">"P"</span>), (<span class="st">"Premise"</span>,<span class="st">"if P then Q"</span>), (<span class="st">"Conditional Elimination,1,2"</span>,<span class="st">"Q"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Naturally a component of what we need, is to decide if something like this is an instance of one of our inference rules. In particular, the easiest case is when it’s an instance of an inference rule that does not make use of any subproof.</p>
<p>Below is a function which can detect if a given list of sentences is an instance of <em>Disjunction Elimination</em>. We will assume that there are three elements of the list, which are of the <code>Proposition</code> class. This class and related code were developed in a previous section, and are reproduced here. You will need to run this code in order to rule the code that follows it.</p>
<p>Note that the classes need to be extended by an implementation of <code>__eq__</code>. If you check the implementation of <code>disjunction_elimination</code> you can see that we need to check the equality of various propositions, hence the need for this extension.</p>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">### OLD CODE </span><span class="al">###</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pyparsing <span class="im">as</span> pp</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Proposition:</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> PropVariable(Proposition):</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, v):</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> (<span class="bu">type</span>(v) <span class="op">==</span> <span class="bu">type</span>(<span class="st">""</span>) <span class="kw">and</span> <span class="bu">len</span>(v) <span class="op">==</span> <span class="dv">1</span>) </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.v <span class="op">=</span> v</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(<span class="va">self</span>.v)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="bu">eval</span>(<span class="va">self</span>, prop_eval):</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> prop_eval(<span class="va">self</span>.v)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__eq__</span>(<span class="va">self</span>, p):</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">type</span>(p) <span class="op">==</span> PropVariable: <span class="cf">return</span> p.v <span class="op">==</span> <span class="va">self</span>.v</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Negation(Proposition):</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, beta):</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> <span class="bu">issubclass</span>(<span class="bu">type</span>(beta),Proposition)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.neg <span class="op">=</span> beta</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(<span class="st">"(not "</span> <span class="op">+</span> <span class="bu">str</span>(<span class="va">self</span>.neg) <span class="op">+</span> <span class="st">")"</span>)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="bu">eval</span>(<span class="va">self</span>, prop_eval):</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(<span class="kw">not</span> <span class="va">self</span>.neg.<span class="bu">eval</span>(prop_eval))</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__eq__</span>(<span class="va">self</span>, p):</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">type</span>(p) <span class="op">==</span> Negation: <span class="cf">return</span> p.neg <span class="op">==</span> <span class="va">self</span>.neg</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Disjunction(Proposition):</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, beta, gamma):</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> <span class="bu">issubclass</span>(<span class="bu">type</span>(beta),Proposition) <span class="op">\</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>            <span class="kw">and</span> <span class="bu">issubclass</span>(<span class="bu">type</span>(gamma),Proposition)</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.left, <span class="va">self</span>.right <span class="op">=</span> beta, gamma</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(<span class="st">"("</span> <span class="op">+</span> <span class="bu">str</span>(<span class="va">self</span>.left )<span class="op">+</span><span class="st">" or "</span> <span class="op">+</span> <span class="bu">str</span>(<span class="va">self</span>.right) <span class="op">+</span> <span class="st">")"</span>)</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="bu">eval</span>(<span class="va">self</span>, prop_eval):</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>        l, r <span class="op">=</span> <span class="va">self</span>.left.<span class="bu">eval</span>(prop_eval), <span class="va">self</span>.right.<span class="bu">eval</span>(prop_eval)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>( l <span class="kw">or</span> r )</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__eq__</span>(<span class="va">self</span>, p): </span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">type</span>(p) <span class="op">==</span> Disjunction: </span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> p.left <span class="op">==</span> <span class="va">self</span>.left <span class="kw">and</span> p.right <span class="op">==</span> <span class="va">self</span>.right</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Conditional(Proposition):</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, beta, gamma):</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> <span class="bu">issubclass</span>(<span class="bu">type</span>(beta),Proposition) <span class="op">\</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>            <span class="kw">and</span> <span class="bu">issubclass</span>(<span class="bu">type</span>(gamma),Proposition)</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.ante, <span class="va">self</span>.conseq <span class="op">=</span> beta, gamma</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(<span class="st">"(if "</span> <span class="op">+</span> <span class="bu">str</span>(<span class="va">self</span>.ante) <span class="op">+</span> <span class="st">" then "</span> <span class="op">+</span> <span class="bu">str</span>(<span class="va">self</span>.conseq) <span class="op">+</span> <span class="st">")"</span>)</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="bu">eval</span>(<span class="va">self</span>, prop_eval):</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>        ante, conseq <span class="op">=</span> <span class="va">self</span>.ante.<span class="bu">eval</span>(prop_eval), <span class="va">self</span>.conseq.<span class="bu">eval</span>(prop_eval)</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="kw">not</span> ante) <span class="kw">or</span> conseq</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__eq__</span>(<span class="va">self</span>, p) <span class="op">-&gt;</span> <span class="bu">bool</span>:</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">type</span>(p) <span class="op">==</span> Conditional:</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> p.ante<span class="op">==</span><span class="va">self</span>.ante <span class="kw">and</span> p.conseq<span class="op">==</span><span class="va">self</span>.conseq</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> parseTree(p):</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">type</span>(p) <span class="op">==</span> <span class="bu">type</span>(<span class="st">""</span>):</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> PropVariable(p)</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(p) <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> parseTree(p[<span class="dv">0</span>])</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(p) <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span>( p[<span class="dv">0</span>] <span class="op">==</span> <span class="st">"not"</span> )</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> Negation(parseTree(p[<span class="dv">1</span>]))</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(p) <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> p[<span class="dv">1</span>] <span class="op">==</span> <span class="st">"or"</span>: <span class="cf">return</span> Disjunction(parseTree(p[<span class="dv">0</span>]), parseTree(p[<span class="dv">2</span>]))</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">"length 3 list but unrecognized middle token"</span>)</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(p) <span class="op">==</span> <span class="dv">4</span>:</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> p[<span class="dv">0</span>] <span class="op">==</span> <span class="st">"if"</span> <span class="kw">and</span> p[<span class="dv">2</span>] <span class="op">==</span> <span class="st">"then"</span>:</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> Conditional(parseTree(p[<span class="dv">1</span>]),parseTree(p[<span class="dv">3</span>]))</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">"length of list unrecognized"</span>)</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>terms <span class="op">=</span> pp.Word(pp.alphas) <span class="op">|</span> <span class="st">"not"</span> <span class="op">|</span> <span class="st">"and"</span> <span class="op">|</span> <span class="st">"or"</span> <span class="op">|</span> <span class="st">"if"</span> <span class="op">|</span> <span class="st">"then"</span> <span class="op">|</span> <span class="st">"iff"</span> </span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>nesting <span class="op">=</span> pp.nestedExpr( <span class="st">'('</span>, <span class="st">')'</span>, content<span class="op">=</span>terms )</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> shape(s): </span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> s.strip() <span class="op">==</span> <span class="st">""</span>: <span class="cf">return</span> <span class="st">""</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> nesting.parseString(<span class="st">"("</span><span class="op">+</span>s<span class="op">+</span><span class="st">")"</span>)[<span class="dv">0</span>]</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> parseTree(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">### NEW CODE </span><span class="al">###</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> disjunction_elimination(sup1,sup2,conc):</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># For disjunction elimination, one proposition must be a disjunction</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># and the other must be a negation.</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    disj, neg <span class="op">=</span> sup1, sup2</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">type</span>(disj) <span class="op">!=</span> Disjunction: </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        disj, neg <span class="op">=</span> sup2, sup1</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">type</span>(disj) <span class="op">!=</span> Disjunction <span class="kw">or</span> <span class="bu">type</span>(neg) <span class="op">!=</span> Negation: </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># In order to reach this line of the function, we must have a disjunction</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># in `disj` and negation in `neg`.  </span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Now in order to be an instance of *Disjunction Elimination*, the </span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># propsition under the negation must match one of the two disjuncts.</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Whichever disjunct matches, the other disjunct should be the final </span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># proposition in the inference (the conclusion).</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    under <span class="op">=</span> neg.neg</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    other <span class="op">=</span> disj.right</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> under <span class="op">!=</span> disj.left:</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="bu">str</span>(disj.left))</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        other <span class="op">=</span> disj.left</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> under <span class="op">!=</span> disj.right: </span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> other <span class="op">==</span> conc</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co"># disj = shape("P or Q")</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="co"># neg = shape("not P")</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="co"># conc = shape("Q")</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="co"># print(disjunction_elimination(disj,neg,conc))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-style-simple callout-important no-icon callout-titled" title="Other Inference Rules in Python">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Other Inference Rules in Python
</div>
</div>
<div class="callout-body-container callout-body">
<p>Implement functions to check the other inference rules that don’t require a subproof, like for instance <em>Disjunction Introduction</em> and <em>Conjunction Elimination</em> and so on. Note that not every rule requires three propositions, but every rule does have some set of premises and some conclusion.</p>
</div>
</div>
<p>It remains then to check an inference based on a subproof. Of course checking a subproof is barely different from checking an entire proof, so we should now write that.</p>
<p>To check an entire proof, we need to iterate over each pair of reason and proposition. We reference the propositions and the inference rule, put them through one of the inference checkers that we’ve already made. If every proposition passes the test, the proof is valid!</p>
<p>We will assume that proofs are formatted in a comma-separated string. The commas will separate triples, which are themselves separated by semi-colons. Each triple will contain the information in a row of a two-column proof: Row number, proposition, and reason. Here is an example, with extra spaces for readability.</p>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>argument <span class="op">=</span> <span class="st">"(1.; P and Q; Premise), (2.; if P then (Q or R); Conditional Proof), (2.1.; P; Assumption), (2.2.; Q or R; Or Introduction, 2.), (2.2.3.; ; End Subproof)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The following code is not terribly interesting – it mostly handles tedious issues of parsing and structuring the argument string.</p>
<div class="cell" data-execution_count="6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">### BORING CODE </span><span class="al">###</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rows_list(argument):</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    bucket <span class="op">=</span> []</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    row <span class="op">=</span> <span class="st">""</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> c <span class="kw">in</span> argument:</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> c <span class="op">==</span> <span class="st">")"</span>: </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>            level <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> level <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>                bucket.append(row)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                row <span class="op">=</span> <span class="st">""</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> level <span class="op">&gt;</span> <span class="dv">0</span>: row <span class="op">+=</span> c</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> c <span class="op">==</span> <span class="st">"("</span>: level <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> bucket</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="7">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> incr_rownum(num, reason_name):</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> reason_name <span class="op">==</span> <span class="st">"Assumption"</span>:</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>        num <span class="op">+=</span> [<span class="dv">1</span>]</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> reason_name <span class="op">==</span> <span class="st">"End Subproof"</span>:</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        num <span class="op">=</span> num[:<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        num[<span class="op">-</span><span class="dv">1</span>] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        num[<span class="op">-</span><span class="dv">1</span>] <span class="op">+=</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="8">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> row_string_to_list(rs):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    bucket <span class="op">=</span> rs.split(<span class="st">"."</span>)[:<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(bucket)):</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        bucket[i] <span class="op">=</span> <span class="bu">int</span>(bucket[i])</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> bucket</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="9">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> x_sees_y(x, y):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    n1, n2 <span class="op">=</span> <span class="bu">len</span>(y), <span class="bu">len</span>(x)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> n2 <span class="op">&lt;</span> n1: <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n1<span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> y[i] <span class="op">!=</span> x[i]: </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> y[n1<span class="op">-</span><span class="dv">1</span>] <span class="op">&lt;=</span> x[n1<span class="op">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Here is where the more interesting part of the code begins, as it implements a lot of the concepts of argument validity. Note that, if you’d like to see the details, the function above <code>x_sees_y</code>, could be interesting too. It determines, for some two row numbers, whether one is allowed to “see” the other. If <code>y</code> is in a subproof closed off from <code>x</code>, then it returns <code>False</code>. Also if <code>y</code> is further along in the proof than <code>x</code>, it returns <code>False</code>. But if <code>y</code> is supposed to be accessible from <code>x</code>, then it returns <code>True</code>.</p>
<div class="cell" data-execution_count="10">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">### INTERESTING CODE </span><span class="al">###</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> validate(argument):</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Preprocess the argument into a list of lists.  </span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    rl <span class="op">=</span> rows_list(argument)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(rl)):</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        rl[i] <span class="op">=</span> rl[i].split(<span class="st">"; "</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>        rl[i][<span class="dv">0</span>] <span class="op">=</span> row_string_to_list(rl[i][<span class="dv">0</span>])</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        rl[i][<span class="dv">1</span>] <span class="op">=</span> shape(rl[i][<span class="dv">1</span>])</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># When the preprocessing is done, the input </span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># "(1.; P or Q; Premise), (2.; R or (P or Q); Disjunction Introduction, 1.)" </span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># looks like </span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># [[[1], Disjunction(...), "Premise"], \</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  [[2], Disjunction(...), "Disjunction Introduction, 1."]]</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># We will validate the row numbering of the argument, by </span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># building our own row numbering as we iterate through the </span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># list, and check that it matches the given numbering.</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    rownum <span class="op">=</span> [<span class="dv">1</span>]</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, row <span class="kw">in</span> <span class="bu">enumerate</span>(rl):</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> rownum <span class="op">!=</span> row[<span class="dv">0</span>]:</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">"Invalid row numbering."</span>)</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>        reason <span class="op">=</span> row[<span class="dv">2</span>].split(<span class="st">", "</span>)</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>        reason_name <span class="op">=</span> reason[<span class="dv">0</span>]</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>        incr_rownum(rownum, reason_name)</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> reason_name <span class="kw">in</span> [<span class="st">"Premise"</span>, <span class="st">"Assumption"</span>, <span class="st">"End Subproof"</span>]: </span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Validating *Disjunction Elimination* requires </span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> reason_name <span class="op">==</span> <span class="st">"Disjunction Elimination"</span>:</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>            <span class="co"># finding the referenced row numbers</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>            sup_ind1 <span class="op">=</span> row_string_to_list(reason[<span class="dv">1</span>]) </span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>            sup_ind2 <span class="op">=</span> row_string_to_list(reason[<span class="dv">2</span>])</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>            <span class="co"># checking that they're not in a closed </span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>            <span class="co"># subproof</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="kw">not</span> (x_sees_y(row[<span class="dv">0</span>],sup_ind1) <span class="kw">and</span> <span class="op">\</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>                    x_sees_y(row[<span class="dv">0</span>],sup_ind2)):</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>            <span class="co"># getting the row at these numbers</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> r <span class="kw">in</span> rl:</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> r[<span class="dv">0</span>] <span class="op">==</span> sup_ind1:</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>                    sup1 <span class="op">=</span> r[<span class="dv">1</span>]</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> r[<span class="dv">0</span>] <span class="op">==</span> sup_ind2:</span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>                    sup2 <span class="op">=</span> r[<span class="dv">1</span>]</span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>            <span class="co"># and checking that they match the pattern.</span></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="kw">not</span> disjunction_elimination(sup1,sup2,row[<span class="dv">1</span>]):</span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> reason_name <span class="op">==</span> <span class="st">"Conditional Introduction"</span>:</span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>            cond_prop <span class="op">=</span> row[<span class="dv">1</span>]</span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>            next_row <span class="op">=</span> rl[i<span class="op">+</span><span class="dv">1</span>]</span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">type</span>(cond_prop) <span class="op">!=</span> Conditional:</span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Conditional introduction checks the next row to see</span></span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>            <span class="co"># that it's the beginning of an assumption with the </span></span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>            <span class="co"># same proposition as is the antecedent of the </span></span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>            <span class="co"># conditional.</span></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>            cert <span class="op">=</span> next_row[<span class="dv">2</span>] <span class="op">==</span> <span class="st">"Assumption"</span></span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>            cert <span class="op">*=</span> cond_prop.ante <span class="op">==</span> next_row[<span class="dv">1</span>]</span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="kw">not</span> cert: <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Then it finds the closing "End Subproof", and checks</span></span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>            <span class="co"># that on the line before, the subproof ended at the </span></span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>            <span class="co"># consequent of the conditional.</span></span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>            cert <span class="op">=</span> <span class="va">False</span></span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(i<span class="op">+</span><span class="dv">1</span>,<span class="bu">len</span>(rl)):</span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="bu">len</span>(rl[j][<span class="dv">0</span>]) <span class="op">==</span> <span class="bu">len</span>(next_row[<span class="dv">0</span>]) <span class="op">\</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">and</span> rl[j][<span class="dv">2</span>] <span class="op">==</span> <span class="st">"End Subproof"</span> \</span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">and</span> rl[j<span class="op">-</span><span class="dv">1</span>][<span class="dv">1</span>] <span class="op">==</span> row[<span class="dv">1</span>].conseq:</span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>                    cert <span class="op">=</span> <span class="va">True</span></span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="kw">not</span> cert: <span class="cf">return</span> cert</span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">True</span></span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a><span class="co"># disj_argument = "(1.; P or Q; Premise), (2.; not Q; Premise), (3.; P; Disjunction Elimination, 1., 2.)"</span></span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a><span class="co"># print(validate(disj_argument))</span></span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a><span class="co"># cond_argument = "(1.; if P then Q; Conditional Introduction), (1.1.; P; Assumption), (1.2.; Q; Premise), (1.3.; ; End Subproof))"</span></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a><span class="co"># print(validate(cond_argument))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-style-simple callout-important no-icon callout-titled" title="Full Proof Assistant">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Full Proof Assistant
</div>
</div>
<div class="callout-body-container callout-body">
<p>Implement the remaining inference rules and use them to extend the proof checker.</p>
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>While <em>Disjunction Elimination</em> might seem natural, <em>Disjunction Introduction</em> might seem strange and unnatural. However, whether it is strange or not, it is still technically <em>valid</em>. Moreover, not only is it valid but it will also prove to be useful, so we accept it as one of our inference rules.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Also often called a “derivation”.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>